"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[383,688],{5077:function(t,s,e){var i;e.d(s,{a:function(){return i}}),function(t){t["AWAITING_WRITER"]="Edited, awaiting writer approval",t["AWAITING_EDITOR"]="Submitted, awaiting editor's approval/ edits",t["POSTED"]="Posted",t["POSTED_AWAITING_WRITER"]="Posted, awaiting writer's approval/ edits",t["POSTED_AWAITING_EDITOR"]="Posted, awaiting editor's approval/ edits"}(i||(i={}))},1383:function(t,s,e){e.r(s),e.d(s,{default:function(){return p}});var i=e(6252);const r={key:0,class:"home container"},n=(0,i._)("h1",null,"All Submissions",-1),a={key:1};function o(t,s,e,o,u,d){const l=(0,i.up)("Submissions");return null!=t.user&&"admin"===t.user.role?((0,i.wg)(),(0,i.iD)("div",r,[n,(0,i.Wm)(l,{ref:"submissions",isAdmin:!0},null,512)])):((0,i.wg)(),(0,i.iD)("div",a,"This page is for admins only!"))}var u=e(1688);const d=e(9669)["default"],l="https://api.nuscas.com/submissions";var c=(0,i.aZ)({name:"Write",components:{Submissions:u["default"]},methods:{onPost(t){d.post(l,{title:t.title,subtitle:t.subtitle,content:t.content,token:this.token}).catch((t=>{alert("Post failed("+t.code+")")})).then((t=>{"OK"==t.data?(alert("Post success"),this.$emit("posted")):alert("Post failed "+t.statusText),this.$refs.submissions.get()}))}},computed:{user(){return this.$store.getters.user},token(){return this.$store.getters.token}},mounted(){document.title="NUSCAS | All Submissions"}}),m=e(3744);const g=(0,m.Z)(c,[["render",o]]);var p=g},1688:function(t,s,e){e.r(s),e.d(s,{default:function(){return P}});var i=e(6252);const r={class:"Posts container"};function n(t,s,e,n,a,o){const u=(0,i.up)("SubmissionCard");return(0,i.wg)(),(0,i.iD)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.posts,(s=>((0,i.wg)(),(0,i.iD)("div",{class:"cards",key:s._id},[(0,i.Wm)(u,{class:"card",id:s._id,title:s.title,subtitle:s.subtitle,writer:s.writer,user:null!=t.user,status:s.status,previewImg:s.previewImg,date:s.submittedDate},null,8,["id","title","subtitle","writer","user","status","previewImg","date"])])))),128))])}var a=e(3577);const o={class:"card"},u={key:0,class:"card-image"},d={class:"image parent"},l=["src"],c={class:"card-content contents"},m={class:"title"},g={class:"subtitle postSubtitle"},p={class:"subtitle"},h={class:"card-footer"};function v(t,s,e,r,n,v){const w=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",o,[t.previewImg?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("figure",d,[(0,i._)("img",{src:t.getImgUrl()},null,8,l)])])):(0,i.kq)("",!0),(0,i._)("div",c,[(0,i.Wm)(w,{to:{path:t.postUrl}},{default:(0,i.w5)((()=>[(0,i._)("div",m,(0,a.zw)(t.title),1),(0,i._)("div",g,(0,a.zw)(t.subtitle),1),(0,i._)("div",p," Submitted by: "+(0,a.zw)(t.writer)+" on "+(0,a.zw)(t.getFormattedDateTime(t.date)),1)])),_:1},8,["to"]),(0,i._)("footer",h,[(0,i._)("div",{class:(0,a.C_)(["card-footer-item title is-6",t.getPostBackgroundColor()])},(0,a.zw)(t.status),3)])])])}var w=e(5077);const b=e(381);var f=(0,i.aZ)({name:"SubmissionCard",props:{id:{type:String,required:!0},title:{type:String,required:!0},subtitle:String,writer:{type:String,required:!0},user:Boolean,status:{type:String,required:!0},previewImg:String,date:{type:String,required:!0}},data(){return{postUrl:"/submissions/"+this.id+"/"}},methods:{getImgUrl(){return this.previewImg},getPostBackgroundColor(){return this.status===w.a.AWAITING_WRITER||this.status===w.a.POSTED_AWAITING_WRITER?"has-background-danger-light":this.status===w.a.POSTED?"has-background-success":"has-background-warning-light"},getFormattedDateTime(t){return b(t).format("DD MMM YYYY")}}}),I=e(3744);const S=(0,I.Z)(f,[["render",v],["__scopeId","data-v-277c6cd8"]]);var _=S;const k=e(9669),T="https://api.nuscas.com/submissions";var A=(0,i.aZ)({name:"Submissions",components:{SubmissionCard:_},data(){return{posts:[]}},props:{isAdmin:Boolean},methods:{async get(){if(this.isAdmin){const{data:t}=await k.get(T+"/all",{params:{token:this.token}});this.posts=t,this.$emit("updated")}else k.get(T,{params:{token:this.token}}).then((t=>{this.posts=t.data,this.$emit("updated")}))}},mounted(){this.get(),document.title="NUSCAS | Your Submissions"},watch:{updated:{handler:function(t,s){t!=s&&this.get()}}},computed:{user(){return this.$store.getters.user},token(){return this.$store.getters.token}}});const D=(0,I.Z)(A,[["render",n],["__scopeId","data-v-4402bce3"]]);var P=D}}]);
//# sourceMappingURL=383.d0b91fd6.js.map