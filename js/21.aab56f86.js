"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[21],{5077:function(t,e,s){var n;s.d(e,{a:function(){return n}}),function(t){t["AWAITING_WRITER"]="Edited, awaiting writer approval",t["AWAITING_EDITOR"]="Submitted, awaiting editor's approval/ edits",t["POSTED"]="Posted",t["POSTED_AWAITING_WRITER"]="Posted, awaiting writer's approval/ edits",t["POSTED_AWAITING_EDITOR"]="Posted, awaiting editor's approval/ edits"}(n||(n={}))},5171:function(t,e,s){s.d(e,{Z:function(){return _}});var n=s(3396),a=s(7139);const i={class:"card"},o={class:"card-header banner"},r={class:"card-header-title title is-1"},d={class:"card-header-title subtitle is-3"},c={class:"card-header-title subtitle is-6"},l=["innerHTML"];function m(t,e,s,m,u,p){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("header",o,[(0,n._)("h1",r,(0,a.zw)(t.post.title),1),(0,n._)("h2",d,(0,a.zw)(t.post.subtitle),1),(0,n._)("h3",c,(0,a.zw)(t.getPostInfo()),1)]),(0,n._)("div",{class:"card-content content",innerHTML:t.post.content},null,8,l),(0,n._)("p",null,"Post ID: "+(0,a.zw)(t.post._id),1)])}var u=s(5077);const p=s(6797);var h=(0,n.aZ)({name:"Article",props:{post:{type:Object,required:!0}},methods:{getPostInfo(){return this.post.status===u.a.POSTED?"Posted by: "+this.post.writer+" on "+this.getFormattedDateTime(this.post.postedDate):"Submitted by: "+this.post.writer+" on "+this.getFormattedDateTime(this.post.submittedDate)},getFormattedDateTime(t){return p(t).format("DD MMM YYYY")}}}),v=s(89);const g=(0,v.Z)(h,[["render",m],["__scopeId","data-v-0b7c327c"]]);var _=g},8021:function(t,e,s){s.r(e),s.d(e,{default:function(){return Z}});var n=s(3396);const a={class:"container"};function i(t,e,s,i,o,r){const d=(0,n.up)("Post");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(d,{id:t.$route.params.id,onTitle:r.onTitleSet},null,8,["id","onTitle"])])}var o=s(7139),r=s(9242);const d=t=>((0,n.dD)("data-v-4a17ba42"),t=t(),(0,n.Cn)(),t),c={key:0},l={key:0,class:"card mgt"},m=d((()=>(0,n._)("div",{class:"card-header"},[(0,n._)("div",{class:"card-header-title"}," Comments: ")],-1))),u={class:"card-content"},p=["onClick"],h={key:1,class:"card mgt"},v=d((()=>(0,n._)("div",{class:"card-header"},[(0,n._)("div",{class:"card-header-title"}," There are no comments. ")],-1))),g=[v],_={key:2,class:"card mgt"},w=d((()=>(0,n._)("div",{class:"card-header"},[(0,n._)("div",{class:"card-header-title"}," New Comment: ")],-1))),D={class:"card-content"},k={key:3,class:"card mgt"},T=d((()=>(0,n._)("div",{class:"card-header"},[(0,n._)("div",{class:"card-header-title"}," Please login to leave a comment. ")],-1))),b=[T];function I(t,e,s,a,i,d){const v=(0,n.up)("Article");return t.post?((0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(v,{post:t.post},null,8,["post"]),t.post.comments&&t.post.comments.length?((0,n.wg)(),(0,n.iD)("div",l,[m,(0,n._)("div",u,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.post.comments,((e,s)=>((0,n.wg)(),(0,n.iD)("div",{class:"has-text-link",key:s},[(0,n.Uk)((0,o.zw)(e.content)+" - "+(0,o.zw)(e.user)+" on "+(0,o.zw)(new Date(e.dateTime).toLocaleString())+" ",1),t.user&&Array(t.user.role="admin")?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:e=>t.deleteComment(s),class:"button is-danger is-small"}," Delete ",8,p)):(0,n.kq)("",!0)])))),128))])])):((0,n.wg)(),(0,n.iD)("div",h,g)),t.user?((0,n.wg)(),(0,n.iD)("div",_,[w,(0,n._)("div",D,[(0,n.wy)((0,n._)("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=e=>t.comment=e),type:"is-link",placeholder:"Enter your comment here"},null,512),[[r.nr,t.comment]]),(0,n._)("button",{class:"button is-primary mgt",onClick:e[1]||(e[1]=(...e)=>t.postComment&&t.postComment(...e))}," Submit ")])])):((0,n.wg)(),(0,n.iD)("div",k,b))])):(0,n.kq)("",!0)}var P=s(6265),f=s.n(P),y=s(5171);const C="https://api.nuscas.com/posts/";var A=(0,n.aZ)({components:{Article:y.Z},name:"PostComponent",props:{id:String},data(){return{post:null,comment:null}},methods:{get(){f().get(C+this.id).then((t=>(this.post=t.data,this.$emit("title",t.data.title),this.$store.getters.user)))},postComment(){f().post(C+this.id+"/comment",{token:this.token,comment:this.comment}).then((()=>{this.get(),this.comment=null}))},deleteComment(t){f()["delete"](C+this.id+"/comment",{data:{token:this.token,commentIndex:t}}).then((()=>{this.get(),this.comment=null}))}},computed:{user(){return this.$store.getters.user},token(){return this.$store.getters.token}},mounted(){this.get()}}),S=s(89);const E=(0,S.Z)(A,[["render",I],["__scopeId","data-v-4a17ba42"]]);var W=E,z={name:"PostPage",data(){return{title:""}},components:{Post:W},methods:{onTitleSet(t){this.title=t,document.title="NUSCAS | "+this.title}}};const O=(0,S.Z)(z,[["render",i],["__scopeId","data-v-4293aa74"]]);var Z=O}}]);
//# sourceMappingURL=21.aab56f86.js.map