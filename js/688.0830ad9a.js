"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[688],{5077:function(t,e,s){var i;s.d(e,{a:function(){return i}}),function(t){t["AWAITING_WRITER"]="Edited, awaiting writer approval",t["AWAITING_EDITOR"]="Submitted, awaiting editor's approval/ edits",t["POSTED"]="Posted",t["POSTED_AWAITING_WRITER"]="Posted, awaiting writer's approval/ edits",t["POSTED_AWAITING_EDITOR"]="Posted, awaiting editor's approval/ edits"}(i||(i={}))},1688:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var i=s(6252);const r={class:"Posts container"};function a(t,e,s,a,n,o){const d=(0,i.up)("SubmissionCard");return(0,i.wg)(),(0,i.iD)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.posts,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"cards",key:e._id},[(0,i.Wm)(d,{class:"card",id:e._id,title:e.title,subtitle:e.subtitle,writer:e.writer,user:null!=t.user,status:e.status,previewImg:e.previewImg,date:e.submittedDate},null,8,["id","title","subtitle","writer","user","status","previewImg","date"])])))),128))])}var n=s(3577);const o={class:"card"},d={key:0,class:"card-image"},u={class:"image parent"},c=["src"],l={class:"card-content contents"},g={class:"title"},p={class:"subtitle postSubtitle"},m={class:"subtitle"},w={class:"card-footer"};function h(t,e,s,r,a,h){const v=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",o,[t.previewImg?((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("figure",u,[(0,i._)("img",{src:t.getImgUrl()},null,8,c)])])):(0,i.kq)("",!0),(0,i._)("div",l,[(0,i.Wm)(v,{to:{path:t.postUrl}},{default:(0,i.w5)((()=>[(0,i._)("div",g,(0,n.zw)(t.title),1),(0,i._)("div",p,(0,n.zw)(t.subtitle),1),(0,i._)("div",m," Submitted by: "+(0,n.zw)(t.writer)+" on "+(0,n.zw)(t.getFormattedDateTime(t.date)),1)])),_:1},8,["to"]),(0,i._)("footer",w,[(0,i._)("div",{class:(0,n.C_)(["card-footer-item title is-6",t.getPostBackgroundColor()])},(0,n.zw)(t.status),3)])])])}var v=s(5077);const I=s(381);var b=(0,i.aZ)({name:"SubmissionCard",props:{id:{type:String,required:!0},title:{type:String,required:!0},subtitle:String,writer:{type:String,required:!0},user:Boolean,status:{type:String,required:!0},previewImg:String,date:{type:String,required:!0}},data(){return{postUrl:"/submissions/"+this.id+"/"}},methods:{getImgUrl(){return this.previewImg},getPostBackgroundColor(){return this.status===v.a.AWAITING_WRITER||this.status===v.a.POSTED_AWAITING_WRITER?"has-background-danger-light":this.status===v.a.POSTED?"has-background-success":"has-background-warning-light"},getFormattedDateTime(t){return I(t).format("DD MMM YYYY")}}}),_=s(3744);const S=(0,_.Z)(b,[["render",h],["__scopeId","data-v-277c6cd8"]]);var k=S;const T=s(9669),f="https://api.nuscas.com/submissions";var D=(0,i.aZ)({name:"Submissions",components:{SubmissionCard:k},data(){return{posts:[]}},props:{isAdmin:Boolean},methods:{async get(){if(this.isAdmin){const{data:t}=await T.get(f+"/all",{params:{token:this.token}});this.posts=t,this.$emit("updated")}else T.get(f,{params:{token:this.token}}).then((t=>{this.posts=t.data,this.$emit("updated")}))}},mounted(){this.get(),document.title="NUSCAS | Your Submissions"},watch:{updated:{handler:function(t,e){t!=e&&this.get()}}},computed:{user(){return this.$store.getters.user},token(){return this.$store.getters.token}}});const A=(0,_.Z)(D,[["render",a],["__scopeId","data-v-4402bce3"]]);var E=A}}]);
//# sourceMappingURL=688.0830ad9a.js.map