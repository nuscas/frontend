"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[21],{75077:function(t,e,n){var i;n.d(e,{a:function(){return i}}),function(t){t["AWAITING_WRITER"]="Edited, awaiting writer approval",t["AWAITING_EDITOR"]="Submitted, awaiting editor's approval/ edits",t["POSTED"]="Posted",t["POSTED_AWAITING_WRITER"]="Posted, awaiting writer's approval/ edits",t["POSTED_AWAITING_EDITOR"]="Posted, awaiting editor's approval/ edits"}(i||(i={}))},25171:function(t,e,n){n.d(e,{Z:function(){return g}});var i=n(73396),s=n(87139),o={class:"card"},r={class:"card-header banner"},a={class:"card-header-title title is-1"},c={class:"card-header-title subtitle is-3"},d={class:"card-header-title subtitle is-6"},l=["innerHTML"];function u(t,e,n,u,m,p){return(0,i.wg)(),(0,i.iD)("div",o,[(0,i._)("header",r,[(0,i._)("h1",a,(0,s.zw)(t.post.title),1),(0,i._)("h2",c,(0,s.zw)(t.post.subtitle),1),(0,i._)("h3",d,(0,s.zw)(t.getPostInfo()),1)]),(0,i._)("div",{class:"card-content content",innerHTML:t.post.content},null,8,l),(0,i._)("p",null,"Post ID: "+(0,s.zw)(t.post._id),1)])}var m=n(75077),p=n(36797),h=(0,i.aZ)({name:"Article",props:{post:{type:Object,required:!0}},methods:{getPostInfo:function(){return this.post.status===m.a.POSTED?"Posted by: "+this.post.writer+" on "+this.getFormattedDateTime(this.post.postedDate):"Submitted by: "+this.post.writer+" on "+this.getFormattedDateTime(this.post.submittedDate)},getFormattedDateTime:function(t){return p(t).format("DD MMM YYYY")}}}),v=n(40089);const f=(0,v.Z)(h,[["render",u],["__scopeId","data-v-0b7c327c"]]);var g=f},78021:function(t,e,n){n.r(e),n.d(e,{default:function(){return Z}});var i=n(73396),s={class:"container"};function o(t,e,n,o,r,a){var c=(0,i.up)("Post");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(c,{id:t.$route.params.id,onTitle:a.onTitleSet},null,8,["id","onTitle"])])}var r=n(87139),a=n(49242),c=function(t){return(0,i.dD)("data-v-4a17ba42"),t=t(),(0,i.Cn)(),t},d={key:0},l={key:0,class:"card mgt"},u=c((function(){return(0,i._)("div",{class:"card-header"},[(0,i._)("div",{class:"card-header-title"}," Comments: ")],-1)})),m={class:"card-content"},p=["onClick"],h={key:1,class:"card mgt"},v=c((function(){return(0,i._)("div",{class:"card-header"},[(0,i._)("div",{class:"card-header-title"}," There are no comments. ")],-1)})),f=[v],g={key:2,class:"card mgt"},_=c((function(){return(0,i._)("div",{class:"card-header"},[(0,i._)("div",{class:"card-header-title"}," New Comment: ")],-1)})),w={class:"card-content"},D={key:3,class:"card mgt"},k=c((function(){return(0,i._)("div",{class:"card-header"},[(0,i._)("div",{class:"card-header-title"}," Please login to leave a comment. ")],-1)})),T=[k];function b(t,e,n,s,o,c){var v=(0,i.up)("Article");return t.post?((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(v,{post:t.post},null,8,["post"]),t.post.comments&&t.post.comments.length?((0,i.wg)(),(0,i.iD)("div",l,[u,(0,i._)("div",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.post.comments,(function(e,n){return(0,i.wg)(),(0,i.iD)("div",{class:"has-text-link",key:n},[(0,i.Uk)((0,r.zw)(e.content)+" - "+(0,r.zw)(e.user)+" on "+(0,r.zw)(new Date(e.dateTime).toLocaleString())+" ",1),t.user&&Array(t.user.role="admin")?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:function(e){return t.deleteComment(n)},class:"button is-danger is-small"}," Delete ",8,p)):(0,i.kq)("",!0)])})),128))])])):((0,i.wg)(),(0,i.iD)("div",h,f)),t.user?((0,i.wg)(),(0,i.iD)("div",g,[_,(0,i._)("div",w,[(0,i.wy)((0,i._)("input",{class:"input","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.comment=e}),type:"is-link",placeholder:"Enter your comment here"},null,512),[[a.nr,t.comment]]),(0,i._)("button",{class:"button is-primary mgt",onClick:e[1]||(e[1]=function(){return t.postComment&&t.postComment.apply(t,arguments)})}," Submit ")])])):((0,i.wg)(),(0,i.iD)("div",D,T))])):(0,i.kq)("",!0)}var I=n(56265),P=n.n(I),y=n(25171),C="https://api.nuscas.com/posts/",A=(0,i.aZ)({components:{Article:y.Z},name:"PostComponent",props:{id:String},data:function(){return{post:null,comment:null}},methods:{get:function(){var t=this;P().get(C+this.id).then((function(e){return t.post=e.data,t.$emit("title",e.data.title),t.$store.getters.user}))},postComment:function(){var t=this;P().post(C+this.id+"/comment",{token:this.token,comment:this.comment}).then((function(){t.get(),t.comment=null}))},deleteComment:function(t){var e=this;P()["delete"](C+this.id+"/comment",{data:{token:this.token,commentIndex:t}}).then((function(){e.get(),e.comment=null}))}},computed:{user:function(){return this.$store.getters.user},token:function(){return this.$store.getters.token}},mounted:function(){this.get()}}),S=n(40089);const E=(0,S.Z)(A,[["render",b],["__scopeId","data-v-4a17ba42"]]);var W=E,z={name:"PostPage",data:function(){return{title:""}},components:{Post:W},methods:{onTitleSet:function(t){this.title=t,document.title="NUSCAS | "+this.title}}};const O=(0,S.Z)(z,[["render",o],["__scopeId","data-v-4293aa74"]]);var Z=O}}]);
//# sourceMappingURL=21-legacy.a611cf1c.js.map