"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[383,688],{5077:function(t,e,s){var i;s.d(e,{a:function(){return i}}),function(t){t["AWAITING_WRITER"]="Edited, awaiting writer approval",t["AWAITING_EDITOR"]="Submitted, awaiting editor's approval/ edits",t["POSTED"]="Posted",t["POSTED_AWAITING_WRITER"]="Posted, awaiting writer's approval/ edits",t["POSTED_AWAITING_EDITOR"]="Posted, awaiting editor's approval/ edits"}(i||(i={}))},1383:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var i=s(6252),n={key:0,class:"home container"},r=(0,i._)("h1",null,"All Submissions",-1),a={key:1};function o(t,e,s,o,u,d){var c=(0,i.up)("Submissions");return null!=t.user&&"admin"===t.user.role?((0,i.wg)(),(0,i.iD)("div",n,[r,(0,i.Wm)(c,{ref:"submissions",isAdmin:!0},null,512)])):((0,i.wg)(),(0,i.iD)("div",a,"This page is for admins only!"))}var u=s(1688),d=s(9669)["default"],c="https://api.nuscas.com/submissions",l=(0,i.aZ)({name:"Write",components:{Submissions:u["default"]},methods:{onPost:function(t){var e=this;d.post(c,{title:t.title,subtitle:t.subtitle,content:t.content,token:this.token}).catch((function(t){alert("Post failed("+t.code+")")})).then((function(t){"OK"==t.data?(alert("Post success"),e.$emit("posted")):alert("Post failed "+t.statusText),e.$refs.submissions.get()}))}},computed:{user:function(){return this.$store.getters.user},token:function(){return this.$store.getters.token}},mounted:function(){document.title="NUSCAS | All Submissions"}}),m=s(3744);const p=(0,m.Z)(l,[["render",o]]);var g=p},1688:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var i=s(6252),n={class:"Posts container"};function r(t,e,s,r,a,o){var u=(0,i.up)("SubmissionCard");return(0,i.wg)(),(0,i.iD)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.posts,(function(e){return(0,i.wg)(),(0,i.iD)("div",{class:"cards",key:e._id},[(0,i.Wm)(u,{class:"card",id:e._id,title:e.title,subtitle:e.subtitle,writer:e.writer,user:null!=t.user,status:e.status,previewImg:e.previewImg,date:e.submittedDate},null,8,["id","title","subtitle","writer","user","status","previewImg","date"])])})),128))])}var a=s(6835),o=s(8534),u=s(3577),d={class:"card"},c={key:0,class:"card-image"},l={class:"image parent"},m=["src"],p={class:"card-content contents"},g={class:"title"},f={class:"subtitle postSubtitle"},v={class:"subtitle"},h={class:"card-footer"};function w(t,e,s,n,r,a){var o=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",d,[t.previewImg?((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("figure",l,[(0,i._)("img",{src:t.getImgUrl()},null,8,m)])])):(0,i.kq)("",!0),(0,i._)("div",p,[(0,i.Wm)(o,{to:{path:t.postUrl}},{default:(0,i.w5)((function(){return[(0,i._)("div",g,(0,u.zw)(t.title),1),(0,i._)("div",f,(0,u.zw)(t.subtitle),1),(0,i._)("div",v," Submitted by: "+(0,u.zw)(t.writer)+" on "+(0,u.zw)(t.getFormattedDateTime(t.date)),1)]})),_:1},8,["to"]),(0,i._)("footer",h,[(0,i._)("div",{class:(0,u.C_)(["card-footer-item title is-6",t.getPostBackgroundColor()])},(0,u.zw)(t.status),3)])])])}var b=s(5077),k=s(381),I=(0,i.aZ)({name:"SubmissionCard",props:{id:{type:String,required:!0},title:{type:String,required:!0},subtitle:String,writer:{type:String,required:!0},user:Boolean,status:{type:String,required:!0},previewImg:String,date:{type:String,required:!0}},data:function(){return{postUrl:"/submissions/"+this.id+"/"}},methods:{getImgUrl:function(){return this.previewImg},getPostBackgroundColor:function(){return this.status===b.a.AWAITING_WRITER||this.status===b.a.POSTED_AWAITING_WRITER?"has-background-danger-light":this.status===b.a.POSTED?"has-background-success":"has-background-warning-light"},getFormattedDateTime:function(t){return k(t).format("DD MMM YYYY")}}}),S=s(3744);const _=(0,S.Z)(I,[["render",w],["__scopeId","data-v-277c6cd8"]]);var T=_,A=s(9669),D="https://api.nuscas.com/submissions",P=(0,i.aZ)({name:"Submissions",components:{SubmissionCard:T},data:function(){return{posts:[]}},props:{isAdmin:Boolean},methods:{get:function(){var t=this;return(0,o.Z)((0,a.Z)().mark((function e(){var s,i;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isAdmin){e.next=9;break}return e.next=3,A.get(D+"/all",{params:{token:t.token}});case 3:s=e.sent,i=s.data,t.posts=i,t.$emit("updated"),e.next=10;break;case 9:A.get(D,{params:{token:t.token}}).then((function(e){t.posts=e.data,t.$emit("updated")}));case 10:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.get(),document.title="NUSCAS | Your Submissions"},watch:{updated:{handler:function(t,e){t!=e&&this.get()}}},computed:{user:function(){return this.$store.getters.user},token:function(){return this.$store.getters.token}}});const W=(0,S.Z)(P,[["render",r],["__scopeId","data-v-4402bce3"]]);var E=W}}]);
//# sourceMappingURL=383-legacy.75c37bc6.js.map